<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ej10</title>
    <script type="text/javascript">

    function Persona(nombre, apellidos) {

      if (nombre == null) {
        this.nombre="An칩nimo"
        this.saludar = function (){
          document.write("Hola soy "+this.nombre+"<br>");
        }
        this.mostrarPerson = function(){
          document.write("Nombre: "+this.nombre+", Telefono: "+this.telefono+", Edad:"+this.edad+"<br>");
        }
      }else {
        this.nombre = nombre;
        this.apellidos = apellidos;
        this.saludar = function (){
          document.write("Hola me llamo "+this.nombre+" "+this.apellidos+"<br>");
        }
        this.mostrarPerson = function(){
          document.write("Nombre: "+this.nombre+", Apellidos: "+this.apellidos+", Telefono: "+this.telefono+", Edad:"+this.edad+"<br>");
        }
      }

      this.edad = Math.floor(Math.random()*100);

      this.cumplirAnyo = function (){
        this.edad = this.edad + 1;
      }
    }

    function Estudiante(nombre, apellidos, edad, estudios, notamed){

      this.nombre=nombre;
      this.apellidos=apellidos;
      this.edad=edad;
      this.estudios = estudios;
      this.notaMedia = notamed.toFixed(2);
      this.recuperar = function (){
        if (this.notaMedia<5){
          this.notaMedia = 5;
        }
      }

      this.crearPassword = function (){
        var segApe = this.apellidos.search(" ");

        // He a침adido un if para dividir las personas segun tengan un apellido o dos
        // porque al hacer las pruebas las hice con un solo apellido y me parecio curioso a침adirlo

        if (this.apellidos.search(" ")==-1) {
          // var letrasE = this.apellidos.match(/e/g).length;
          // var contraE = this.apellidos;
          // while (letrasE>0) {
          //   contraE = this.apellidos.replace("e","3");
          //   letrasE--;
          // }
          var contraE = this.apellidos;
          while (contraE.search("e") >= 0){

            contraE = contraE.replace("e","3");
          }
          var contraEA = contraE;
          while (contraEA.search("a") >= 0){
            contraEA = contraEA.replace("a","4");
          }
          this.password = this.nombre.charAt(0).toUpperCase()+contraEA.toLowerCase()+this.nombre.length;

        }else {
          var contraE = this.apellidos.slice(0,segApe)
          while (contraE.search("e") >= 0){

            contraE = contraE.replace("e","3");
          }
          var contraEA = contraE;
          while (contraEA.search("a") >= 0){
            contraEA = contraEA.replace("a","4");
          }
          this.password = this.nombre.charAt(0).toUpperCase()+contraEA.toLowerCase()+this.nombre.length;
        }

      }
    }

    var personUno = new Persona("Shawn","Spencer");
    var personDos = new Persona("Burton", "Guster");
    var personTres = new Persona("Dani", "Giner Villalba");

    var estUno = new Estudiante(personUno.nombre, personUno.apellidos, personUno.edad, "ESO", 4.532);
    var estDos = new Estudiante(personDos.nombre, personDos.apellidos, personDos.edad, "SMR", 7.865);
    var estTres = new Estudiante(personTres.nombre, personTres.apellidos, personTres.edad, "DAW", 10);

    estUno.crearPassword();
    document.write("La contrase침a del estudiante uno es: "+estUno.password);
    </script>
  </head>
  <body>

  </body>
</html>
